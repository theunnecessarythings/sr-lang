package behavior_slices

testing :: import "std/testing"

process_slice :: proc(s: []i32) {
    if !testing.expect_equal_i64(20, s[0].(i64)) { return }
    if !testing.expect_equal_i64(30, s[1].(i64)) { return }
}

aa :: proc(a: []string) Error ! void {
    testing.expect(a.len > 0, "Array length should be > 0")!
}

test "composite_types: basic slice creation" {
    arr := [1, 2, 3, 4, 5]
    slice := arr[1 .. 4] // Elements 2, 3, 4
    if !testing.expect_equal_i64(2, slice[0].(i64)) { return Error.Fail }
    if !testing.expect_equal_i64(3, slice[1].(i64)) { return Error.Fail }
    if !testing.expect_equal_i64(4, slice[2].(i64)) { return Error.Fail }
}

test "composite_types: slice length" {
    arr := [1, 2, 3, 4, 5]
    slice := arr[1 .. 4]
    if !testing.expect_equal_i64(3, slice.len.(i64)) { return Error.Fail }
}

test "composite_types: empty slice" {
    arr := [1, 2, 3, 4, 5]
    slice := arr[2 .. 2]
    if !testing.expect_equal_i64(0, slice.len.(i64)) { return Error.Fail }
}

test "composite_types: modifying slice elements affects array" {
    arr := [1, 2, 3, 4, 5]
    slice := arr[1 .. 4]
    slice[0] = 99 // Modifies arr[1]
    if !testing.expect_equal_i64(99, arr[1].(i64)) { return Error.Fail }
}

test "composite_types: slice as function argument" {
    arr := [10, 20, 30, 40]
    process_slice(arr[1 .. 3])
}

test "composite_types: slice of strings scalar indexing" {
    a := ["hello", "wordl", "where", "are", "you"]
    aa(a)!
    aa(["hello", "world"])!
}
